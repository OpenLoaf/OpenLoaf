{
  "name": "desktop",
  "productName": "Tenas",
  "version": "0.1.1",
  "description": "Tenas desktop app",
  "main": ".webpack/main",
  "build": {
    "appId": "com.hexems.tenas",
    "productName": "Tenas",
    "asar": true,
    "protocols": [
      {
        "name": "Tenas",
        "schemes": [
          "tenas"
        ]
      }
    ],
    "files": [
      ".webpack/**",
      "package.json"
    ],
    "afterPack": "./scripts/afterPack.js",
    "extraResources": [
      {
        "from": "resources/runtime.env",
        "to": "runtime.env"
      },
      {
        "from": "resources/icon.png",
        "to": "icon.png"
      },
      {
        "from": "../../apps/server/dist/server.mjs",
        "to": "server.mjs"
      },
      {
        "from": "../../apps/server/package.json",
        "to": "server.package.json"
      },
      {
        "from": "../../apps/server/dist/seed.db",
        "to": "seed.db"
      },
      {
        "from": "../../apps/web/out",
        "to": "out"
      },
      {
        "from": "../../apps/web/package.json",
        "to": "web.package.json"
      },
      {
        "from": "../../node_modules/sharp",
        "to": "node_modules/sharp",
        "filter": [
          "lib/**",
          "package.json"
        ]
      },
      {
        "from": "../../node_modules/@img/colour",
        "to": "node_modules/@img/colour"
      },
      {
        "from": "../../node_modules/detect-libc",
        "to": "node_modules/detect-libc",
        "filter": [
          "lib/**",
          "package.json"
        ]
      },
      {
        "from": "../../node_modules/semver",
        "to": "node_modules/semver",
        "filter": [
          "functions/**",
          "internal/**",
          "classes/**",
          "ranges/**",
          "index.js",
          "preload.js",
          "range.bnf",
          "package.json"
        ]
      },
      {
        "from": "../../node_modules/playwright-core",
        "to": "node_modules/playwright-core"
      },
      {
        "from": "../../node_modules/@libsql/client",
        "to": "node_modules/@libsql/client"
      },
      {
        "from": "../../node_modules/@libsql/core",
        "to": "node_modules/@libsql/core"
      },
      {
        "from": "../../node_modules/@libsql/hrana-client",
        "to": "node_modules/@libsql/hrana-client"
      },
      {
        "from": "../../node_modules/@libsql/isomorphic-fetch",
        "to": "node_modules/@libsql/isomorphic-fetch"
      },
      {
        "from": "../../node_modules/@libsql/isomorphic-ws",
        "to": "node_modules/@libsql/isomorphic-ws"
      }
    ],
    "mac": {
      "target": [
        {
          "target": "dmg",
          "arch": [
            "arm64"
          ]
        },
        {
          "target": "zip",
          "arch": [
            "arm64"
          ]
        }
      ],
      "icon": "resources/icon.icns",
      "identity": "Haikesen Energy Technology (Shanghai) Co., Ltd (3S76858939)",
      "hardenedRuntime": true,
      "gatekeeperAssess": false,
      "entitlements": "entitlements.mac.plist",
      "entitlementsInherit": "entitlements.mac.plist",
      "signIgnore": [
        "\\.js$",
        "\\.json$",
        "\\.html$",
        "\\.css$",
        "\\.map$",
        "\\.md$",
        "\\.txt$",
        "\\.swift$",
        "\\.cs$",
        "\\.csproj$",
        "\\.pdb$"
      ],
      "notarize": {
        "teamId": "3S76858939"
      },
      "extendInfo": {
        "NSMicrophoneUsageDescription": "语音输入需要访问麦克风。",
        "NSSpeechRecognitionUsageDescription": "语音输入需要使用系统语音识别。",
        "NSCalendarsUsageDescription": "日历同步需要访问系统日历。",
        "NSRemindersUsageDescription": "提醒事项同步需要访问系统提醒事项。"
      },
      "extraResources": [
        {
          "from": "resources/icon.icns",
          "to": "icon.icns"
        },
        {
          "from": "resources/speech",
          "to": "speech",
          "filter": [
            "macos/tenas-speech"
          ]
        },
        {
          "from": "resources/calendar",
          "to": "calendar",
          "filter": [
            "macos/tenas-calendar"
          ]
        },
        {
          "from": "../../node_modules/node-pty/prebuilds",
          "to": "prebuilds",
          "filter": [
            "darwin-arm64/**"
          ]
        },
        {
          "from": "../../node_modules/@img/sharp-darwin-arm64",
          "to": "node_modules/@img/sharp-darwin-arm64"
        },
        {
          "from": "../../node_modules/@img/sharp-libvips-darwin-arm64",
          "to": "node_modules/@img/sharp-libvips-darwin-arm64"
        },
        {
          "from": "../../node_modules/@libsql/darwin-arm64",
          "to": "node_modules/@libsql/darwin-arm64"
        }
      ]
    },
    "win": {
      "icon": "resources/icon.ico",
      "target": [
        {
          "target": "nsis",
          "arch": [
            "x64"
          ]
        },
        {
          "target": "msi",
          "arch": [
            "x64"
          ]
        }
      ],
      "extraResources": [
        {
          "from": "resources/icon.ico",
          "to": "icon.ico"
        },
        {
          "from": "resources/speech",
          "to": "speech",
          "filter": [
            "windows/tenas-speech.exe"
          ]
        },
        {
          "from": "resources/calendar",
          "to": "calendar",
          "filter": [
            "windows/tenas-calendar.exe"
          ]
        },
        {
          "from": "../../node_modules/node-pty/prebuilds",
          "to": "prebuilds",
          "filter": [
            "win32-x64/**"
          ]
        },
        {
          "from": "../../node_modules/@img/sharp-win32-x64",
          "to": "node_modules/@img/sharp-win32-x64"
        },
        {
          "from": "../../node_modules/@libsql/win32-x64-msvc",
          "to": "node_modules/@libsql/win32-x64-msvc"
        }
      ]
    },
    "linux": {
      "icon": "resources/icon.png",
      "target": [
        {
          "target": "AppImage",
          "arch": [
            "x64"
          ]
        }
      ],
      "extraResources": [
        {
          "from": "../../node_modules/node-pty/prebuilds",
          "to": "prebuilds",
          "filter": [
            "linux-x64/**"
          ]
        },
        {
          "from": "../../node_modules/@img/sharp-linux-x64",
          "to": "node_modules/@img/sharp-linux-x64"
        },
        {
          "from": "../../node_modules/@img/sharp-libvips-linux-x64",
          "to": "node_modules/@img/sharp-libvips-linux-x64"
        },
        {
          "from": "../../node_modules/@libsql/linux-x64-gnu",
          "to": "node_modules/@libsql/linux-x64-gnu"
        }
      ]
    },
    "publish": [
      {
        "provider": "generic",
        "url": "https://r2-tenas-update.hexems.com/desktop"
      }
    ]
  },
  "scripts": {
    "predesktop": "node scripts/fixElectronInstall.mjs && pnpm run build:speech-helper && pnpm run build:calendar-helper",
    "desktop": "electron-forge start",
    "build:speech-helper": "node scripts/buildSpeechHelper.mjs",
    "build:calendar-helper": "node scripts/buildCalendarHelper.mjs",
    "package": "pnpm --filter server run build:prod && pnpm --filter web run build --webpack && electron-forge package",
    "dist:mac": "pnpm run package && node scripts/dist.mjs --mac",
    "dist:mac:dev": "pnpm run package && node scripts/dist.mjs --mac --config.mac.identity=null",
    "dist:win": "pnpm run package && node scripts/dist.mjs --win",
    "dist:win:dev": "pnpm run package && node scripts/dist.mjs --win --config.mac.identity=null",
    "dist:linux": "pnpm run package && node scripts/dist.mjs --linux",
    "dist:linux:dev": "pnpm run package && node scripts/dist.mjs --linux --config.mac.identity=null",
    "dist:resign": "node scripts/dist.mjs",
    "publish-update:mac": "node scripts/publish-update.mjs",
    "check-types": "pnpm -w exec tsc -p apps/desktop/tsconfig.json --noEmit",
    "lint": "eslint src"
  },
  "keywords": [],
  "author": {
    "name": "zz@hexems.com",
    "email": "torykit@torykit.com"
  },
  "dependencies": {
    "@tenas-ai/api": "workspace:*",
    "@tenas-ai/config": "workspace:*",
    "electron-updater": "^6.7.3",
    "pino": "^10.3.0",
    "serve-handler": "^6.1.6"
  },
  "devDependencies": {
    "@electron-forge/cli": "^7.11.1",
    "@electron-forge/maker-dmg": "^7.11.1",
    "@electron-forge/maker-zip": "^7.11.1",
    "@electron-forge/plugin-webpack": "^7.11.1",
    "@electron-forge/shared-types": "^7.11.1",
    "dotenv-cli": "^11.0.0",
    "electron": "40.1.0",
    "electron-builder": "^24.13.3",
    "electron-devtools-installer": "^4.0.0",
    "ts-loader": "^9.5.4",
    "typescript": "catalog:"
  }
}
